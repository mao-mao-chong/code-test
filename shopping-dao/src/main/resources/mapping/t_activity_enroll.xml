<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.com.bmw.dao.ActivityEnrollDao">
    <resultMap id="ActivityEnroll" type="org.com.bmw.model.ActivityEnroll" >
        <result column="id" property="id"/>
        <result column="activity_id" property="activityId"/>
        <result column="activity_name" property="activityName"/>
        <result column="store_id" property="storeId"/>
        <result column="store_name" property="storeName"/>
        <result column="product_id" property="productId"/>
        <result column="product_name" property="productName"/>
        <result column="product_inventory" property="productInventory"/>
        <result column="product_price" property="productPrice"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="del_flag" property="delFlag"/>
    </resultMap>
    <select id="queryActivityEnroll" resultMap="ActivityEnroll">
        select * from t_activity_enroll
        where 1=1
        <if test="id != null">
            and id=#{id}
        </if>
        <if test="activityId != null">
            and activity_id=#{activityId}
        </if>
        <if test="activityName != null">
            and activity_name like concat('%',#{activityName},'%')
        </if>
        <if test="storeId != null">
            and store_id=#{storeId}
        </if>
        <if test="storeName != null">
            and store_name like concat('%',#{storeName},'%')
        </if>
        <if test="productId != null">
            and product_id=#{productId}
        </if>
        <if test="productName != null">
            and product_name like concat('%',#{productName},'%')
        </if>
        and del_flag=0
    </select>
    <select id="queryActivityEnrollList" resultMap="ActivityEnroll">
        select * from t_activity_enroll
        where 1=1
        <if test="activityEnroll.id != null">
            and id=#{activityEnroll.id}
        </if>
        <if test="activityEnroll.activityId != null">
            and activity_id=#{activityEnroll.activityId}
        </if>
        <if test="activityEnroll.activityName != null">
            and activity_name like concat('%',#{activityEnroll.activityName},'%')
        </if>
        <if test="activityEnroll.storeId != null">
            and store_id=#{activityEnroll.storeId}
        </if>
        <if test="activityEnroll.storeName != null">
            and store_name like concat('%',#{activityEnroll.storeName},'%')
        </if>
        <if test="activityEnroll.productId != null">
            and product_id=#{activityEnroll.productId}
        </if>
        <if test="activityEnroll.productName != null">
            and product_name like concat('%',#{activityEnroll.productName},'%')
        </if>
        and del_flag=0
        <if test="commonQueryBean.start != null and commonQueryBean.pageSize !=null">
            limit #{commonQueryBean.start},#{commonQueryBean.pageSize}
        </if>
    </select>
    <update id="modifyActivityEnroll">
        update t_activity_enroll
        <set>
            <if test="delFlag != null">
                del_flag =#{delFlag},
            </if>
            update_time=sysdate()
        </set>
        where id=#{id}
    </update>
    <insert id="insertActivityEnroll" useGeneratedKeys="true" keyProperty="id">
        insert into t_activity_enroll(activity_id,activity_name,store_id,store_name,product_id,product_inventory,product_price,product_name,create_time,update_time,del_flag)
        values (
                #{activityId},
                #{activityName},
                #{storeId},
                #{storeName},
                #{productId},
                #{productInventory},
                #{productPrice},
                #{productName},
                sysdate(),
                sysdate(),
                0
               )
    </insert>
    <select id="count" resultType="java.lang.Integer">
        select count(*) from t_activity_enroll
        where 1=1
        <if test="id != null">
            and id=#{id}
        </if>
        <if test="activityId != null">
            and activity_id=#{activityId}
        </if>
        <if test="activityName != null">
            and activity_name like concat('%',#{activityName},'%')
        </if>
        <if test="storeId != null">
            and store_id=#{storeId}
        </if>
        <if test="storeName != null">
            and store_name like concat('%',#{storeName},'%')
        </if>
        <if test="productId != null">
            and product_id=#{productId}
        </if>
        <if test="productName != null">
            and product_name like concat('%',#{productName},'%')
        </if>
        and del_flag=0
    </select>
</mapper>